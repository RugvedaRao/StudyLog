<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CA Foundation Tracker</title>

<style>
:root{
  --bg:#0b1020;
  --text:#e8eefc;
  --muted:#a8b7d8;
  --border:1px solid rgba(255,255,255,.10);
  --green:#22c55e;
  --accent:#38bdf8;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:radial-gradient(circle at 20% 20%, rgba(34,197,94,.08), transparent 50%),var(--bg);
  color:var(--text);
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:25px;
}

.app{
  width:100%;
  max-width:1100px;
  border-radius:20px;
  border:var(--border);
  overflow:hidden;
}

.hero{
  padding:20px;
  background:linear-gradient(90deg, rgba(34,197,94,.5), rgba(56,189,248,.5));
}

.hero h1{
  margin:0;
  font-size:22px;
  font-weight:900;
}

.content{
  padding:20px;
}

.card{
  background:rgba(255,255,255,.03);
  border:var(--border);
  border-radius:16px;
  padding:18px;
}

.mainTitle{
  font-size:18px;
  font-weight:900;
  margin-bottom:15px;
}

.metersGrid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:15px;
}

.meterCard{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
}

.ring{
  width:120px;
  height:120px;
  position:relative;
}

.ring svg{
  transform:rotate(-90deg);
}

.pct{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:900;
}

.subjectName{
  font-size:15px;
  font-weight:900;
  cursor:pointer;
  text-align:center;
}

.subjectName:hover{
  text-decoration:underline;
}

.doneText{
  font-size:13px;
  color:var(--muted);
  font-weight:800;
}

.hidden{display:none}

.topicRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px;
  border-radius:12px;
  background:rgba(255,255,255,.05);
  margin-bottom:8px;
}

.topicName{
  font-size:14px;
  font-weight:800;
}

.topicRow input{
  width:20px;
  height:20px;
  accent-color:var(--green);
}

.back{
  cursor:pointer;
  font-weight:900;
  margin-bottom:15px;
}

@media(max-width:1000px){
  .metersGrid{grid-template-columns:repeat(2,1fr);}
}
@media(max-width:600px){
  .metersGrid{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="app">
  <div class="hero">
    <h1>CA Foundation Tracker</h1>
  </div>

  <div class="content">

    <!-- HOME -->
    <section id="homeScreen">
      <div class="card">
        <div class="mainTitle">Progress</div>
        <div class="metersGrid" id="metersGrid"></div>
      </div>
    </section>

    <!-- SUBJECT -->
    <section id="subjectScreen" class="hidden">
      <div class="card">
        <div class="back" onclick="showHome()">‚Üê Back</div>
        <h2 id="subjectTitle"></h2>
        <div id="topics"></div>
      </div>
    </section>

  </div>
</div>

<script>
const SUBJECTS = {
"Accounting":[
"Theoretical Framework","Accounting Process","Bank Reconciliation Statement",
"Inventories","Depreciation and Amortisation",
"Bills of Exchange and Promissory Notes",
"Final Accounts of Sole Proprietors",
"Financial Statements of Not-for-Profit Organizations",
"Accounts from Incomplete Records",
"Partnership and LLP Accounts","Company Accounts"
],
"Business Laws":[
"Indian Regulatory Framework","The Indian Contract Act, 1872",
"The Sale of Goods Act, 1930","The Indian Partnership Act, 1932",
"The Limited Liability Partnership Act, 2008",
"The Companies Act, 2013","The Negotiable Instruments Act, 1881"
],
"Quantitative Aptitude":[
"Ratio, Proportion, Indices & Logarithms","Equations","Linear Inequalities",
"Mathematics of Finance","Permutations and Combinations",
"Sequence and Series","Sets, Relations & Functions",
"Differential & Integral Calculus",
"Number Series, Coding-Decoding, Odd Man Out",
"Direction Tests","Seating Arrangements","Blood Relations",
"Statistical Description of Data & Sampling",
"Measures of Central Tendency & Dispersion",
"Probability","Theoretical Distributions"
],
"Business Economics":[
"Introduction to Business Economics","Theory of Demand and Supply",
"Theory of Production and Cost",
"Price Determination in Different Markets",
"Determination of National Income","Business Cycles",
"Public Finance","Money Market",
"International Trade","Indian Economy"
]
};

const STORAGE_KEY="ca_tracker_v3";

function getState(){
  const raw=localStorage.getItem(STORAGE_KEY);
  if(!raw){
    const base={};
    for(let s in SUBJECTS){
      base[s]=Array(SUBJECTS[s].length).fill(false);
    }
    return base;
  }
  return JSON.parse(raw);
}

function saveState(state){
  localStorage.setItem(STORAGE_KEY,JSON.stringify(state));
}

function calc(subj,state){
  const arr=state[subj];
  const done=arr.filter(Boolean).length;
  const total=arr.length;
  const pct=Math.round((done/total)*100);
  return {done,total,pct};
}

function renderHome(){
  const state=getState();
  const grid=document.getElementById("metersGrid");
  grid.innerHTML="";

  for(let subj in SUBJECTS){
    const {done,total,pct}=calc(subj,state);
    const id=subj.replace(/\s/g,"");

    const card=document.createElement("div");
    card.className="meterCard";
    card.innerHTML=`
      <div class="ring">
        <div class="pct">${pct}%</div>
        <svg width="120" height="120">
          <circle cx="60" cy="60" r="45" stroke="#1f2937" stroke-width="10" fill="none"/>
          <circle cx="60" cy="60" r="45"
            stroke="var(--green)" stroke-width="10"
            fill="none"
            stroke-dasharray="282.74"
            stroke-dashoffset="${282.74-(pct/100*282.74)}"
          />
        </svg>
      </div>
      <div class="subjectName" onclick="openSubject('${subj}')">${subj}</div>
      <div class="doneText">${done}/${total} done</div>
    `;
    grid.appendChild(card);
  }
}

function openSubject(subj){
  document.getElementById("homeScreen").classList.add("hidden");
  document.getElementById("subjectScreen").classList.remove("hidden");
  document.getElementById("subjectTitle").innerText=subj;

  const state=getState();
  const wrap=document.getElementById("topics");
  wrap.innerHTML="";

  SUBJECTS[subj].forEach((topic,i)=>{
    const row=document.createElement("div");
    row.className="topicRow";
    row.innerHTML=`
      <div class="topicName">${topic}</div>
      <input type="checkbox" ${state[subj][i]?"checked":""}>
    `;
    const cb=row.querySelector("input");
    cb.addEventListener("change",()=>{
      state[subj][i]=cb.checked;
      saveState(state);
      renderHome();
    });
    wrap.appendChild(row);
  });
}

function showHome(){
  document.getElementById("subjectScreen").classList.add("hidden");
  document.getElementById("homeScreen").classList.remove("hidden");
  renderHome();
}

renderHome();
</script>

</body>
</html>
